<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Ironhack Cart</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <style>
      h2 {
        text-align: center;
        padding-top: 100px;
      }
      thead {
        background: rebeccapurple;
      }
      button {
        background: gray;
      }
      table {
        border-collapse: collapse;
        width: 400px;
      }
      th,
      td {
        border: 1px solid black;
      }
      .calc {
        align-items: center;
        background: rgb(218, 126, 126);
        font-size: 20px;
      }
      /* dont work yet */
      /* strong{
        text-align: center;
    } */
    </style>
  </head>
  <body>
    <div class="container">
      <h2>Ironhack Cart</h2>
      <table class="table">
        <thead>
          <tr>
            <th>Product name</th>
            <th>Unit Price</th>
            <th>Quantity</th>
            <th>Subtotal</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="tbody">
          <!-- <tr>
        <td>Name of the products</td>
        <td>Unit price of the products</td>
        <!-- fok u change koule fokis par defaut a -->
          <!-- <td><input type="number" ></td>
        <td>Subtotal</td>
        <td><button>Remove</button></td>
      </tr> -->
          <!-- <tr id="lis">
        <!-- <td>Name of the products</td>
        <td>Unit price of the products</td>
        <td><input type="number" ></td>
        <td>Subtotal</td>
        <td><button>Remove</button></td> -->
          <!-- </tr> -->
        </tbody>
      </table>
      <div>
        <input
          type="button"
          value="Calculate Prices"
          class="calc"
          id="calculate_price"
        />
        <br /><strong id="total">Total:$0</strong>
      </div>
    </div>
    <script>
      let products = [
        {
          id: 123,
          name: "USB Flash drive",
          price: 12.56,
          quantity: 1,
        },
        {
          id: 456,
          name: "Laptop Dell",
          price: 892.0,
          quantity: 3,
        },
        {
          id: 678,
          name: "Glasses",
          price: 7.5,
          quantity: 2,
        },
      ];
      const tbody = document.getElementById("tbody");
      //   console.log(tbody);
      let total = 0;
      products.forEach((el, idx) => {
        tbody.innerHTML += `
        <tr id="lis${idx}">
        <td id='name${idx}' value="${el.name}">${el.name}</td>
        <td id='price${idx}' value="${el.price}">$${el.price}</td>
        <td><input type="number" value="${el.quantity}" id='quantity${idx}' min=0></td>
        <td id='subtotal${idx}'>${el.quantity * el.price}</td>
        <td><button id='btn${idx}' class='btn'>Remove</button></td>
        `;
        // if (el.quantity<0) {
        //     <td><input type="number" value="${el.quantity}" id='quantity${idx}'</td>
// }
        total += (el.quantity * el.price)
      });
      

    for (let key in products) {
        const quantity_poducts = document.getElementById(`quantity${key}`);
        quantity_poducts.oninput=e=>{
            console.log('li change')
            console.log(quantity_poducts.value)

            if(quantity_poducts.value<0){
              alert('Ou paka mete yon vale ki negatif')
                quantity_poducts.value.innerText = 0
            }
            // console.log(remove)
            // remove.onfocus=(e)=>{
            //   e.preventDefault() 
            //   console.console.log('li gn fokis!!!');             
            // }

            
            
        }       
          
    }
    let remove = document.getElementsByClassName(`btn`)
    console.log(remove)
//  on  foreremove.addEventListener('click', function(event){
//   console.log(`Ou klike sou ${event.target}`)
//   event.target
// })
// console.log(remove)
// remove.forEach(el => {
//   console.log(el)
  
// });
for (let key in remove) {
  remove[key].onclick = (e) =>{
    const td =remove[key].parentNode
    const tr = td.parentNode
    console.log(tr)
    // const quantity =getElementById(``);
    // const price=0;
    tr.innerHTML=''
    // const price=document.getElementById(``)
    // document.getElementById("total").innerText = `Total:$${total1}`;
  }

}


      const total_price = (document.getElementById(
        "total"
      ).innerText = `Total:$${total}`);
      //   console.log(total_price)

      const calculate_price = document.getElementById("calculate_price");
      // console.log(calculate_price)

      calculate_price.onclick = (e) => {
        e.preventDefault();
        let subtotal;
        let total1=0;
        console.log("clicked!!!");
        //    const lis = document.getElementById('calculate_price')
        for (let i = 0; i < products.length; i++) {
          const quantity = document.getElementById(`quantity${i}`).value;
          console.log(quantity);
          // const price =  document.getElementById(`price${i}`).value
          const price = products[i].price;
          console.log(price);
          subtotal = (document.getElementById(`subtotal${i}`).innerText =
            quantity * parseInt(price));
            console.log(subtotal);
            total1 += subtotal;
            console.log(total);
            document.getElementById("total").innerText = `Total:$${total1}`;
        }
      };

      // calculate_price.onclick = (e) => {
      //   e.preventDefault();
      //   let subtotal;
      //   let total1=0;
      //   console.log("clicked!!!");
      //   //    const lis = document.getElementById('calculate_price')
      //   for (let i = 0; i < products.length; i++) {
      //     const quantity = document.getElementById(`quantity${i}`).value;
      //     console.log(quantity);
      //     // const price =  document.getElementById(`price${i}`).value
      //     const price = products[i].price;
      //     console.log(price);
      //     subtotal = (document.getElementById(`subtotal${i}`).innerText =
      //       quantity * parseInt(price));
      //       console.log(subtotal);
      //       total1 += subtotal;
      //       console.log(total);
      //       document.getElementById("total").innerText = `Total:$${total1}`;
      //   }
      // };

      
    </script>
  </body>
</html>
